<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Caramella | Sovereign Culinaric Architecture & Joinery</title>
    <!-- Feature 12: Industrial Schema (TechnicalArticle) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TechnicalArticle",
      "headline": "Engineering Precision in Luxury Cabinetry: The Sovereign Protocol",
      "description": "A technical deconstruction of ±0.1mm tolerance joinery and high-performance material science in tropical millwork.",
      "author": {
        "@type": "Organization",
        "name": "Caramella Trading Co."
      },
      "image": "https://caramella.os/images/hero-render.jpg",
      "datePublished": "2026-01-26",
      "technicalAudience": "Architects, Engineers, Developers, Luxury Homeowners",
      "proficiencyLevel": "Expert"
    }
    </script>
    <meta name="description"
        content="The best luxury cabinet maker and top-tier renovation company in Brunei. Specializing in custom carpentry, walk-in wardrobes, and high-end interior joinery.">

    <!-- Feature 25: Preload Critical Assets -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="preload" as="image" href="images/img_4.jpg">
    content="Best cabinet maker Brunei, Best carpenter Brunei, Renovation company Brunei, Luxury interior design, Custom
    wardrobes, Islamic Zen design">

    <!-- Feature 28: PWA Manifest & Icons -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="images/logo.png" type="image/png">
    <meta name="theme-color" content="#000000">

    <!-- Feature 20: Open Graph Social Share Cards -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.caramellabrunei.com/">
    <link rel="canonical" href="https://www.caramellabrunei.com/" />
    <meta property="og:title" content="Caramella Trading Co. | Premier Luxury Cabinet Maker Brunei">
    <meta property="og:description"
        content="Discover Brunei's finest bespoke cabinetry and interior renovation. German engineering meets luxury design.">
    <meta property="og:image" content="https://www.caramellabrunei.com/images/img_1.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_BN">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Caramella Trading Co. | Luxury Cabinetry">
    <meta name="twitter:description"
        content="Bespoke kitchens and wardrobes in Brunei. Precision engineered for the tropics.">
    <meta name="twitter:image" content="https://www.caramellabrunei.com/images/img_1.jpg">

    <!-- Feature 17: SEO Schema Markup (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HomeAndConstructionBusiness",
      "name": "Caramella Trading Company",
      "image": "https://www.caramellabrunei.com/images/logo.png",
      "@id": "https://www.caramellabrunei.com",
      "url": "https://www.caramellabrunei.com",
      "telephone": "+6737187185",
      "priceRange": "$$$",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Unit 22, Ground Floor, The Airport Mall",
        "addressLocality": "Bandar Seri Begawan",
        "addressRegion": "Brunei-Muara",
        "postalCode": "BB3513",
        "addressCountry": "BN"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 4.9031, 
        "longitude": 114.9398
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday"
        ],
        "opens": "08:30",
        "closes": "17:30"
      },
      "sameAs": [
        "https://www.instagram.com/caramellabrunei",
        "https://www.facebook.com/caramellabrunei"
      ],
      "description": "Brunei's premier luxury cabinet maker and renovation specialist. We combine German CNC precision with bespoke interior design for kitchens, wardrobes, and commercial spaces."
    }
    </script>
    <style>
        body {
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        /* === THEME: TRILLION DOLLAR MUSEUM (2025-2026 EDITION) === */
        :root {
            /* THE VOID (Museum Lighting) */
            --bg-void: #000000;
            --bg-spotlight: radial-gradient(circle at 50% 20%, #102030 0%, #000000 80%);
            --bg-surface: rgba(10, 20, 30, 0.4);

            /* 2025-2026 TREND TOKENS */
            --radius-lg: 1.5rem;
            --radius-xl: 2.5rem;
            --warm-taupe: #2E2A25;
            --warm-taupe-glass: rgba(46, 42, 37, 0.3);
            --shadow-soft: 0 12px 32px rgba(0, 0, 0, 0.4);
            --shadow-float: 0 24px 64px rgba(0, 0, 0, 0.5);
            --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-smooth: cubic-bezier(0.22, 0.61, 0.36, 1);

            /* TRILLION DOLLAR GLASS */
            --glass-base: rgba(15, 25, 40, 0.6);
            --sapphire-glass: var(--glass-base);
            --glass-blur: blur(40px) saturate(200%);
            --glass-border: 1px solid rgba(255, 255, 255, 0.15);
            --glass-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);

            /* DIAMOND REFRACTION (Prismatic) */
            --diamond-refraction: linear-gradient(115deg, transparent 40%, rgba(0, 255, 255, 0.4) 45%, rgba(255, 0, 255, 0.4) 50%, rgba(255, 255, 0, 0.4) 55%, transparent 60%);
            --diamond-sparkle: linear-gradient(45deg, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.95) 50%, rgba(255, 255, 255, 0) 60%);
            --diamond-border: 1px solid rgba(255, 255, 255, 0.2);

            /* MIRROR GOLD (18k Polish) + Warm Variant + Animated Shimmer */
            --gold-grad: linear-gradient(90deg, #B8860B 0%, #FFD700 25%, #FFFFFF 50%, #FFD700 75%, #B8860B 100%);
            --gold-metallic: var(--gold-grad);
            --gold-warm: linear-gradient(135deg, #FFD700 0%, #B8860B 100%);

            /* LIQUID RUBY */
            --ruby-grad: radial-gradient(circle at 35% 35%, #FF3D60 0%, #A00020 60%, #200000 100%);
            --ruby-glow: 0 0 30px rgba(255, 61, 96, 0.6);

            /* TYPOGRAPHY */
            --font-main: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
            --text-main: #FFFFFF;
            --text-muted: #9ba1a6;

            /* LEGACY */
            --accent-amber: #FFD700;
            --border-gold: 1px solid rgba(212, 175, 55, 0.4);
        }

        /* GLOBAL RESET */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* Feature 27: Keyboard Focus */
        :focus-visible {
            outline: 2px solid #FFD700;
            outline-offset: 4px;
            border-radius: 4px;
        }

        html {
            scroll-behavior: smooth;
            scrollbar-width: none;
        }

        /* Feature 32: Luxury Selection Color */
        ::selection {
            background: #FFD700;
            color: #000000;
        }

        /* Feature 30: Nav Badge */
        .nav-badge {
            font-size: 0.6em;
            background: var(--ruby-grad);
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            vertical-align: super;
            margin-left: 4px;
            margin-left: 4px;
            box-shadow: 0 2px 8px rgba(255, 61, 96, 0.4);
        }

        /* Feature 33: Portfolio Filters */
        .filter-bar {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: #FFD700;
            color: #000;
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        html::-webkit-scrollbar {
            display: none;
        }

        body {
            background-color: var(--bg-void) !important;
            color: var(--text-main) !important;
            font-family: var(--font-main);
            overflow-x: hidden;
            line-height: 1.8;
            background-image: radial-gradient(circle at 50% 0%, #0F293D 0%, #020609 80%);
            /* Feature 3: Page Transition */
            opacity: 0;
            animation: pageLoad 0.6s ease-out forwards;
        }

        @keyframes pageLoad {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* NAVIGATION (Standardized) */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 80px;
            padding: 0 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10000;
            background: rgba(8, 22, 33, 0.98) !important;
            border-bottom: var(--border-gold);
            backdrop-filter: blur(10px);
        }

        .navbar.scrolled {
            background: rgba(8, 22, 33, 0.99) !important;
        }

        .logo {
            color: #FFFFFF !important;
            font-size: 1.6rem;
            font-weight: 700;
            text-transform: uppercase;
            text-decoration: none;
            letter-spacing: 0.2em;
        }

        .nav-links {
            display: flex;
            gap: 3rem;
            align-items: center;
        }

        .nav-links a {
            color: #FFFFFF !important;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-size: 0.8rem;
            transition: 0.3s;
            opacity: 1 !important;
        }

        .nav-links a:hover,
        .nav-links a.nav-active {
            color: #FFD700 !important;
        }

        .menu-toggle {
            display: none;
            color: #FFF;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Feature 24: Language Switcher */
        .lang-switch {
            font-size: 0.75rem;
            margin-left: 1.5rem;
            padding-left: 1.5rem;
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            display: inline-flex;
            gap: 0.5rem;
            align-items: center;
        }

        .lang-opt {
            transition: 0.3s;
        }

        .lang-opt:hover,
        .lang-opt.active {
            color: #FFD700;
        }

        /* HERO SECTION (2025-2026 Immersive) */
        .hero {
            min-height: 100svh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            background: var(--bg-void) !important;
        }

        .hero-bg-slider {
            position: absolute;
            inset: 0;
            z-index: 0;
        }

        .hero-slide {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 2s ease;
        }

        .hero-slide.active {
            opacity: 1;
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(8, 22, 33, 0.7), rgba(8, 22, 33, 0.9));
            z-index: 1;
        }

        .hero-noise {
            display: none;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 900px;
            padding: 2rem;
        }

        .hero-subtitle {
            color: #FFD700 !important;
            font-size: 1rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            background: none !important;
            -webkit-text-fill-color: #FFD700 !important;
        }

        .hero h1 {
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 700;
            line-height: 1.15;
            margin-bottom: 2.5rem;
            color: #FFFFFF;
            letter-spacing: -0.01em;
        }

        .hero h1 .italic-accent {
            color: #FFD700;
            font-style: italic;
            background: var(--gold-grad);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: goldRain 3s ease-in-out infinite;
            display: inline;
        }

        .hero-badge {
            display: inline-block;
            padding: 0.6rem 1.4rem;
            background: rgba(15, 41, 61, 0.4);
            border: var(--diamond-border);
            color: #FFD700;
            font-family: var(--font-main);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            margin-bottom: 1.5rem;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            transition: 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            animation: badgeGlow 4s infinite alternate;
            position: relative;
            overflow: hidden;
            /* Mobile Touch Target */
            min-height: 44px;
            display: inline-flex;
            align-items: center;
        }

        /* Sparkle Overlay */
        .hero-badge::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--diamond-sparkle);
            opacity: 0.5;
            mix-blend-mode: overlay;
        }

        @keyframes badgeGlow {
            0% {
                box-shadow: 0 0 5px rgba(255, 215, 0, 0.1);
                border-color: rgba(255, 215, 0, 0.2);
            }

            100% {
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);
                border-color: rgba(255, 215, 0, 0.5);
            }
        }

        .hero-badge:hover {
            border-color: #FFD700;
            transform: translateY(-2px);
            background: rgba(15, 41, 61, 0.6);
        }

        .btn-luxury {
            display: inline-block;
            padding: 1.25rem 3rem;
            font-size: 0.9rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: #081621 !important;
            background: #FFD700;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.5s var(--ease-elastic);
            text-decoration: none;
            font-weight: 600;
            /* Feature 5: Ripple Effect */
            position: relative;
            overflow: hidden;
        }

        .btn-luxury::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn-luxury:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-luxury:hover {
            background: var(--gold-warm);
            color: #081621 !important;
            box-shadow: 0 16px 48px rgba(255, 215, 0, 0.35);
            transform: translateY(-4px) scale(1.02);
        }

        /* WIX EMBED & MOBILE OPTIMIZATION */
        body {
            /* Ensure physics don't break in iframe */
            width: 100%;
            height: 100%;
            overscroll-behavior-y: none;
            /* Prevent bounce in embed */
        }

        .section {
            padding: 6rem 2rem;
            background: var(--bg-void) !important;
            will-change: transform;
            /* Performance hint */
        }

        @media (max-width: 768px) {
            .section {
                padding: 4rem 1.5rem;
            }

            /* Mobile Touch Targets */
            button,
            a,
            .service-card,
            .hero-badge {
                touch-action: manipulation;
                min-height: 44px;
                /* Apple Human Interface Guidelines */
            }

            /* Reduce blur for mobile performance */
            .service-card {
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .trust-section {
            background: var(--bg-void) !important;
            border-bottom: var(--border-gold);
        }

        .trust-grid {
            display: flex;
            justify-content: center;
            gap: 4rem;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .trust-item {
            text-align: center;
        }

        .trust-number {
            font-size: 3rem;
            font-weight: 700;
            display: block;
            margin-bottom: 0.5rem;
            color: #FFD700 !important;
            background: var(--gold-grad);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: goldRain 6s linear infinite;
        }

        .trust-label {
            color: var(--text-muted) !important;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            background: none !important;
            -webkit-text-fill-color: var(--text-muted) !important;
        }

        /* Feature 9: Partner Logo Slider */
        .partners-marquee {
            width: 100%;
            overflow: hidden;
            margin-top: 2rem;
            padding: 1.5rem 0;
            position: relative;
        }

        .partners-marquee::before,
        .partners-marquee::after {
            content: '';
            position: absolute;
            top: 0;
            width: 100px;
            height: 100%;
            z-index: 2;
        }

        .partners-marquee::before {
            left: 0;
            background: linear-gradient(to right, var(--bg-void), transparent);
        }

        .partners-marquee::after {
            right: 0;
            background: linear-gradient(to left, var(--bg-void), transparent);
        }

        .partners-track {
            display: flex;
            gap: 4rem;
            animation: marqueeScroll 20s linear infinite;
            width: max-content;
        }

        .partners-track:hover {
            animation-play-state: paused;
        }

        @keyframes marqueeScroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .partner-text {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            white-space: nowrap;
            transition: color 0.3s ease;
        }

        .partner-text:hover {
            color: #FFD700;
        }

        .partner-sep {
            color: rgba(255, 215, 0, 0.3);
            margin: 0 1.5rem;
        }

        /* TYPOGRAPHY */
        h2 {
            font-size: clamp(2rem, 4vw, 3rem);
            color: #FFFFFF !important;
            margin-bottom: 3rem;
            text-align: center;
            background: none !important;
            -webkit-text-fill-color: #FFFFFF !important;
        }

        h2 .italic-accent {
            color: #FFD700 !important;
            font-style: italic;
            background: var(--gold-grad);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: goldRain 6s linear infinite;
        }

        h3 {
            font-size: 1.5rem;
            color: #FFD700 !important;
            margin-bottom: 1rem;
            background: none !important;
            -webkit-text-fill-color: #FFD700 !important;
        }

        p,
        li {
            color: var(--text-muted);
            font-size: 1rem;
            line-height: 1.8;
        }

        strong {
            color: #FFFFFF;
            font-weight: 600;
        }

        /* SERVICES GRID */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            padding: 0 1rem;
            /* Base padding for all screens */
        }

        .service-card {
            background: var(--glass-base) !important;
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: var(--glass-border) !important;
            box-shadow: var(--shadow-soft);
            padding: 2.5rem;
            transition: all 0.6s var(--ease-elastic);
            position: relative;
            overflow: hidden;
            border-radius: var(--radius-xl);
            /* Feature 4: Staggered Reveal */
            opacity: 0;
            transform: translateY(40px);
            animation: staggerReveal 0.8s ease-out forwards;
            /* Feature 7: 3D Tilt */
            --rotateX: 0deg;
            --rotateY: 0deg;
            transform-style: preserve-3d;
        }

        .services-grid {
            perspective: 1000px;
        }

        .service-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .service-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .service-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .service-card:nth-child(4) {
            animation-delay: 0.4s;
        }

        .service-card:nth-child(5) {
            animation-delay: 0.5s;
        }

        .service-card:nth-child(6) {
            animation-delay: 0.6s;
        }

        @keyframes staggerReveal {
            0% {
                opacity: 0;
                transform: translateY(40px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .service-card:hover {
            border-color: rgba(255, 255, 255, 0.4) !important;
            transform: translateY(-12px) scale(1.02);
            box-shadow: var(--shadow-float);
        }

        /* Diamond Refraction Wipe */
        .service-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: var(--diamond-refraction);
            transform: skewX(-25deg);
            transition: 0.5s;
            opacity: 0;
            pointer-events: none;
        }

        .service-card:hover::after {
            left: 200%;
            opacity: 0.6;
            transition: 0.7s ease-in-out;
        }

        .service-card h3 {
            margin-bottom: 1rem;
        }

        .service-card p {
            margin: 0;
        }

        /* GALLERY */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .gallery-item {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: 0.4s ease;
        }

        .gallery-item:hover {
            border-color: #FFD700;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: 0.5s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.05);
        }

        /* Feature 15: Lazy Loading Blur-up */
        .blur-load {
            filter: blur(20px);
            opacity: 0;
            transition: filter 0.5s ease-out, opacity 0.5s ease-out, transform 0.5s ease;
        }

        .blur-load.loaded {
            filter: blur(0);
            opacity: 1;
        }

        /* CONTACT FORM */
        .contact-form-container {
            max-width: 600px;
            margin: 3rem auto;
            text-align: left;
            background: rgba(255, 255, 255, 0.02);
            padding: 2rem;
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #fff;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
            background: rgba(0, 0, 0, 0.6);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-error {
            color: #ff3d60;
            font-size: 0.8rem;
            margin-top: 0.25rem;
            display: none;
        }

        .form-success {
            display: none;
            text-align: center;
            color: #FFD700;
            padding: 2rem;
            background: rgba(255, 215, 0, 0.1);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .form-success h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.5rem;
        }

        .form-success h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.5rem;
        }

        /* Feature 22: Google Maps Dark Mode */
        .map-container {
            margin: 4rem auto 2rem;
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid rgba(255, 215, 0, 0.2);
            height: 400px;
            position: relative;
            max-width: 900px;
            box-shadow: var(--shadow-float);
        }

        .map-iframe {
            width: 100%;
            height: 100%;
            border: 0;
            /* Dark Mode Hack for Google Maps */
            filter: grayscale(100%) invert(92%) contrast(83%);
            transition: filter 0.5s ease;
        }

        .map-container:hover .map-iframe {
            filter: grayscale(0%) invert(0%) contrast(100%);
        }

        /* Feature 10: Testimonials */
        .testimonials-section {
            background: var(--bg-surface) !important;
            text-align: center;
            padding: 6rem 2rem;
        }

        .quote-icon {
            font-size: 4rem;
            color: #FFD700;
            line-height: 1;
            margin-bottom: 2rem;
        }

        .testimonial-text {
            font-size: 1.4rem;
            font-style: italic;
            color: #FFFFFF !important;
            max-width: 700px;
            margin: 0 auto 2rem;
            line-height: 1.8;
        }

        cite {
            color: var(--text-muted);
        }

        /* CONTACT */
        .contact-section {
            background: var(--bg-void) !important;
            text-align: center;
        }

        .contact-details {
            display: flex;
            justify-content: center;
            gap: 6rem;
            margin: 3rem 0;
            flex-wrap: wrap;
        }

        .contact-label {
            color: #FFD700;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: block;
            margin-bottom: 0.5rem;
        }

        .contact-value {
            color: #FFFFFF;
            font-size: 1.2rem;
        }

        .social-icons-bar {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .social-icons-bar a {
            color: var(--text-muted);
            transition: 0.3s;
        }

        .social-icons-bar a:hover {
            color: #FFD700;
        }

        /* LIGHTBOX */
        .lightbox {
            position: fixed;
            inset: 0;
            background: rgba(8, 22, 33, 0.95);
            z-index: 20000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: 0.4s;
        }

        .lightbox.active {
            opacity: 1;
            pointer-events: all;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .close-lightbox {
            position: absolute;
            top: 2rem;
            right: 2rem;
            font-size: 2.5rem;
            color: #FFFFFF;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-lightbox:hover {
            color: #FFD700;
        }

        /* ANIMATIONS */
        @keyframes goldRain {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        .reveal-stone {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.5s ease, transform 1.5s ease;
        }

        .reveal-stone.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Feature 10: Testimonial Carousel */
        .testimonials-section {
            text-align: center;
            padding: 6rem 2rem;
            background: linear-gradient(180deg, rgba(15, 41, 61, 0.2) 0%, transparent 100%);
        }

        .testimonials-carousel {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            height: 280px;
            overflow: hidden;
        }

        .testimonial-card {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.8s var(--ease-elastic);
            background: var(--glass-base);
            backdrop-filter: var(--glass-blur);
            border: var(--glass-border);
            border-radius: var(--radius-xl);
            padding: 3rem;
        }

        .testimonial-card.active {
            opacity: 1;
            transform: translateX(0);
        }

        .testimonial-card.prev {
            opacity: 0;
            transform: translateX(-100px);
        }

        .testimonial-stars {
            color: #FFD700;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .testimonial-quote {
            font-size: 1.1rem;
            font-style: italic;
            line-height: 1.8;
            color: var(--text-main);
            margin-bottom: 1.5rem;
        }

        .testimonial-author {
            font-weight: 600;
            color: #FFD700;
        }

        .testimonial-role {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .testimonial-dots {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        .testimonial-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .testimonial-dot.active {
            background: #FFD700;
            transform: scale(1.2);
        }

        /* Feature 11: Mobile Bottom Navigation */
        .mobile-bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 215, 0, 0.2);
            padding: 0.75rem 0;
            padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));
            z-index: 9998;
        }

        .mobile-bottom-nav .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .mobile-bottom-nav .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.3s ease;
        }

        .mobile-bottom-nav .nav-item:hover,
        .mobile-bottom-nav .nav-item.active {
            color: #FFD700;
        }

        .mobile-bottom-nav .nav-icon {
            font-size: 1.25rem;
        }

        @media (max-width: 768px) {
            .mobile-bottom-nav {
                display: block;
            }

            /* Hide regular WhatsApp float on mobile since it's in nav */
            .whatsapp-float {
                bottom: 5rem;
            }

            /* Add padding to body so content isn't hidden behind nav */
            body {
                padding-bottom: 4.5rem;
            }
        }

        /* Feature 13: Back-to-Top Button */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 215, 0, 0.3);
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            z-index: 9997;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: rgba(255, 215, 0, 0.2);
            border-color: #FFD700;
            transform: translateY(-3px);
        }

        .back-to-top svg {
            width: 100%;
            height: 100%;
            position: absolute;
            transform: rotate(-90deg);
        }

        .back-to-top .progress-ring {
            fill: none;
            stroke: #FFD700;
            stroke-width: 2;
            stroke-dasharray: 138;
            stroke-dashoffset: 138;
            transition: stroke-dashoffset 0.1s ease;
        }

        .back-to-top .arrow {
            color: #FFD700;
            font-size: 1.2rem;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .back-to-top {
                bottom: 5.5rem;
                left: 1rem;
                width: 40px;
                height: 40px;
            }
        }

        /* Feature 16: Social Proof Popup */
        .social-proof {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            background: rgba(15, 41, 61, 0.85);
            /* Darker glass for readability */
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-left: 3px solid #FFD700;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 9996;
            transform: translateX(-150%);
            /* Start hidden off-screen */
            transition: transform 0.6s var(--ease-elastic);
            max-width: 320px;
        }

        .social-proof.visible {
            transform: translateX(0);
        }

        .social-proof-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFD700;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .social-proof-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .social-proof-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: #fff;
        }

        .social-proof-meta {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Feature 14: Cookie Consent Banner */
        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(8, 22, 33, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 215, 0, 0.1);
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10000;
            transform: translateY(100%);
            transition: transform 0.5s var(--ease-elastic);
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
        }

        .cookie-banner.visible {
            transform: translateY(0);
        }

        .cookie-content {
            flex: 1;
            margin-right: 2rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .cookie-btn {
            background: #FFD700;
            color: var(--bg-void);
            border: none;
            padding: 0.75rem 2rem;
            border-radius: var(--radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .cookie-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2);
        }

        @media (max-width: 768px) {
            .social-proof {
                display: none;
                /* Hide on mobile to respect screen real estate */
            }

            .cookie-banner {
                flex-direction: column;
                gap: 1rem;
                padding-bottom: 5.5rem;
                /* Space for bottom nav */
                text-align: center;
            }

            .cookie-content {
                margin-right: 0;
            }
        }

        /* LEGACY HIDING */
        .magical-bg,
        .orb,
        .orb-1,
        .orb-2,
        .orb-3,
        .preloader,
        .cursor,
        .cursor-dot,
        .cursor-light,
        .particles-container {
            display: none !important;
        }

        /* MOBILE OPTIMIZATION */
        @media (max-width: 968px) {
            .navbar {
                padding: 0 1.5rem;
                height: 70px;
            }

            .menu-toggle {
                display: block;
                z-index: 10001;
            }

            .nav-links {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: #081621;
                flex-direction: column;
                justify-content: center;
                transform: translateY(-100%);
                transition: 0.3s ease;
                padding-top: 80px;
            }

            .nav-links.active {
                transform: translateY(0);
            }

            .nav-links a {
                font-size: 1.2rem;
            }

            .hero {
                padding-top: 70px;
                /* Minimal padding for mobile navbar */
                min-height: 100vh;
            }

            .trust-grid {
                gap: 2rem;
                padding: 0 1.5rem;
                /* Prevent edge clipping on mobile */
            }

            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                padding: 0 1.5rem;
                /* Prevent edge clipping on mobile */
            }

            .contact-details {
                gap: 3rem;
            }

            :root {
                --glass-blur: blur(12px) saturate(180%);
            }
        }

        @media (max-width: 600px) {
            .gallery-grid {
                grid-template-columns: 1fr;
                padding: 0 1.5rem;
                /* Prevent edge clipping on mobile */
            }
        }

        /* ========== FEATURE 1: FLOATING WHATSAPP BUTTON ========== */
        .whatsapp-float {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);
            z-index: 9999;
            transition: all 0.4s var(--ease-elastic);
            cursor: pointer;
            text-decoration: none;
        }

        .whatsapp-float:hover {
            transform: scale(1.1) translateY(-4px);
            box-shadow: 0 8px 32px rgba(37, 211, 102, 0.6);
        }

        .whatsapp-float svg {
            width: 32px;
            height: 32px;
            fill: #FFFFFF;
        }

        .whatsapp-float::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #25D366;
            animation: whatsappPulse 2s ease-out infinite;
            z-index: -1;
        }

        @keyframes whatsappPulse {
            0% {
                transform: scale(1);
                opacity: 0.5;
            }

            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }

        /* Tooltip on hover */
        .whatsapp-float::after {
            content: 'Chat with us';
            position: absolute;
            right: 70px;
            background: rgba(0, 0, 0, 0.8);
            color: #FFF;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .whatsapp-float:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* ========== FEATURE 2: SCROLL PROGRESS INDICATOR ========== */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: var(--gold-grad);
            background-size: 200% 100%;
            width: 0%;
            z-index: 10000;
            transition: width 0.1s linear;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Caramella Brunei - Luxury Cabinet Maker & Joinery. Bespoke kitchens, wardrobes, and furniture.">
    <link rel="canonical" href="https://caramellabrunei.com/">

    <!-- Open Graph -->
    <meta property="og:title" content="Caramella Brunei | Luxury Cabinet Maker">
    <meta property="og:description"
        content="Brunei's premier cabinet maker and custom joinery specialist. Serving Brunei & Sarawak since 2015.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://caramellabrunei.com/">
    <meta property="og:image" content="https://caramellabrunei.com/images/hero-bg.jpg">
</head>


<body>
    <!-- Scroll Progress Indicator -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Feature 14: Cookie Consent -->
    <div class="cookie-banner" id="cookieBanner">
        <div class="cookie-content">
            We use cookies to enhance your experience and analyze our traffic. By continuing to visit this site, you
            agree to our use of cookies.
        </div>
        <button class="cookie-btn" id="acceptCookies">Accept</button>
    </div>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/6737187185" target="_blank" class="whatsapp-float" aria-label="Chat on WhatsApp">
        <svg viewBox="0 0 24 24">
            <path
                d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z" />
        </svg>
    </a>

    <!-- MAGICAL BACKGROUND - Ethereal Animated Layer -->
    <div class="magical-bg"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <!-- Feature 13: Back-to-Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg viewBox="0 0 48 48">
            <circle class="progress-ring" cx="24" cy="24" r="22"></circle>
        </svg>
        <span class="arrow">↑</span>
    </button>

    <!-- Feature 16: Social Proof Popup -->
    <div class="social-proof" id="socialProof">
        <div class="social-proof-icon">⚡</div>
        <div class="social-proof-content">
            <div class="social-proof-title" id="sp-title">New Request</div>
            <div class="social-proof-meta" id="sp-meta">Someone in Bandar just requested a quote</div>
        </div>
    </div>

    <!-- Preloader -->
    <div class="preloader" id="preloader">
        <div class="preloader-logo">Caramella</div>
        <div class="preloader-bar"></div>
    </div>

    <!-- Particle Background (Merged from Award) -->
    <div class="particles-container" id="particles"></div>

    <!-- Custom Cursor (Merged from Award) -->
    <div class="cursor"></div>
    <div class="cursor-dot"></div>
    <div class="cursor-light"></div>

    <nav class="navbar">
        <a href="https://www.caramellabrunei.com/" target="_top" class="logo">Caramella</a>
        <button class="menu-toggle" aria-label="Toggle Navigation"
            style="background: none; border: none;">&#9776;</button>
        <div class="nav-links">
            <a href="index.html" class="nav-active">Home</a>
            <a href="portfolio.html">Portfolio</a>
            <a href="inspiration.html">Concepts<span class="nav-badge">NEW</span></a>
            <a href="faq.html">Knowledge</a>
            <a href="#" onclick="openCalc(); return false;">Estimate</a>
            <a href="https://wa.me/6737187185" target="_blank">Inquire</a>
            <span
                style="font-size: 0.6rem; border: 1px solid #FFD700; padding: 0.3rem 0.8rem; color: #FFD700; margin-left: 2rem; border-radius: 50px;">&#127463;&#127475;
                EST. 2015</span>

            <!-- Feature 24: Language Switcher -->
            <div class="lang-switch">
                <span class="lang-opt active">EN</span>
                <span class="lang-sep">|</span>
                <span class="lang-opt">BM</span>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <header class="hero">
        <div class="hero-noise"></div>
        <div class="hero-bg-slider"></div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <div class="hero-badge">Unit 22, Ground Floor, The Airport Mall</div>
            <p class="hero-subtitle">Brunei Darussalam</p>
            <!-- PRIMARY KEYWORD TARGET: Cabinet Maker Brunei -->
            <h1>
                Brunei's Premier<br><span class="italic-accent">Cabinet Maker &<br>Joinery</span>
            </h1>
            <div style="display:flex; gap:1rem; flex-wrap:wrap;">
                <a href="portfolio.html" class="btn-luxury">View Collections</a>
            </div>
        </div>
    </header>

    <!-- Trust Authority -->
    <section class="section trust-section">
        <div class="container">
            <div class="trust-grid reveal-stone">
                <div class="trust-item">
                    <span class="trust-number">10+</span>
                    <span class="trust-label">Years of Mastery</span>
                </div>
                <div class="trust-item">
                    <span class="trust-number">600+</span>
                    <span class="trust-label">Bespoke Projects</span>
                </div>

                <div class="trust-item">
                    <span class="trust-number">CNC</span>
                    <span class="trust-label">Precision Manufacturing</span>
                </div>
            </div>
            <!-- Partner Marquee (Subtle) -->
            <div class="partners-marquee">
                <div class="partners-track">
                    <span class="partner-text">Higold</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Glem Gas</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Blum</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Egger</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Caesarstone</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Higold</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Glem Gas</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Blum</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Egger</span>
                    <span class="partner-sep">•</span>
                    <span class="partner-text">Caesarstone</span>
                    <span class="partner-sep">•</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Engineering Truth Section -->
    <section class="section"
        style="border-top: 1px solid var(--glass-border); background: linear-gradient(to bottom, rgba(15, 17, 21, 0.65), rgba(8, 9, 11, 0.65)), url('images/hero-bg.jpg'); background-size: cover; background-position: center; background-attachment: fixed;">
        <div class="container" style="display: flex; flex-wrap: wrap; align-items: center; gap: 4rem;">
            <div style="flex: 1; min-width: 300px;">
                <h3 style="color: var(--accent-amber); margin-bottom: 1rem;">Not Just Designed. <br><em
                        style="color:#fff;">Calculated.</em></h3>
                <p>Unlike franchises that import standard boxes, we calculate every joint in AutoCAD before we cut.
                    Zero
                    filler panels. Zero gaps. Engineered specifically for Brunei's humidity.</p>
            </div>
            <div
                style="flex: 1; font-family: var(--font-body); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--primary-light); background: rgba(255, 255, 255, 0.03); border-left: 2px solid var(--accent-amber); backdrop-filter: blur(5px); padding: 2rem;">
                <div style="display: grid; grid-template-columns: 1fr auto; gap: 0.5rem;">
                    <span style="opacity: 0.5;">PRECISION STANDARD</span> <span
                        style="color: var(--accent-amber);">Â±0.1MM CNC</span>
                    <span style="opacity: 0.5;">HUMIDITY RESISTANCE</span> <span style="color: var(--accent-amber);">ENF
                        GRADE</span>
                    <span style="opacity: 0.5;">JOINERY LOGIC</span> <span
                        style="color: var(--accent-amber);">PARAMETRIC FIT</span>
                    <span style="opacity: 0.5;">STATUS</span> <span
                        style="color: #fff; border-bottom: 1px solid rgba(255,255,255,0.2);">FABRICATION
                        READY</span>
                </div>
            </div>
        </div>
    </section>


    <!-- Services (Renamed & Elevated) -->
    <section id="services" class="section">
        <div class="container">
            <h2 class="reveal-stone">Culinary <span class="italic-accent">Architecture</span> <br>& Sartorial Living
            </h2>
            <div class="services-grid reveal-stone">
                <div class="service-card card-gradient">
                    <h3>Culinary Architecture</h3>
                    <p>Bespoke kitchen systems engineered for both heavy cooking and visual silence. Featuring Blum
                        ergonomic hardware and premium quartz surfacing.</p>
                </div>
                <div class="service-card card-gradient">
                    <h3>Sartorial Collections</h3>
                    <p>Walk-in wardrobes that rival luxury boutiques. Glass-fronted displays, integrated lighting,
                        and
                        velvet-lined organization for your attire.</p>
                </div>
                <div class="service-card card-gradient">
                    <h3>Spatial Joinery</h3>
                    <p>Architectural wall cladding, hidden doorways, and floating consoles that transform the
                        structural
                        feel of your residence.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Feature 41: Process & Stats -->
    <section id="process" class="section" style="background: rgba(255,255,255,0.02); margin: 2rem 0;">
        <div class="container">
            <h2 class="reveal-stone" style="text-align: center; margin-bottom: 4rem;">The <span
                    class="italic-accent">Process</span></h2>

            <div class="timeline-grid reveal-stone"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; padding: 0 1rem;">
                <div class="timeline-step" style="text-align: center; position: relative;">
                    <div class="step-num"
                        style="font-size: 5rem; font-weight: 800; color: rgba(255,255,255,0.03); line-height: 0.8; margin-bottom: 1rem;">
                        01</div>
                    <h4 style="color: #FFD700; margin-bottom: 0.5rem;">Design</h4>
                    <p style="font-size: 0.9rem; opacity: 0.7;">3D Parametric CAD modeling.</p>
                </div>
                <div class="timeline-step" style="text-align: center; position: relative;">
                    <div class="step-num"
                        style="font-size: 5rem; font-weight: 800; color: rgba(255,255,255,0.03); line-height: 0.8; margin-bottom: 1rem;">
                        02</div>
                    <h4 style="color: #FFD700; margin-bottom: 0.5rem;">Fabricate</h4>
                    <p style="font-size: 0.9rem; opacity: 0.7;">0.1mm CNC precision accuracy.</p>
                </div>
                <div class="timeline-step" style="text-align: center; position: relative;">
                    <div class="step-num"
                        style="font-size: 5rem; font-weight: 800; color: rgba(255,255,255,0.03); line-height: 0.8; margin-bottom: 1rem;">
                        03</div>
                    <h4 style="color: #FFD700; margin-bottom: 0.5rem;">Install</h4>
                    <p style="font-size: 0.9rem; opacity: 0.7;">One-day rapid site fitting.</p>
                </div>
            </div>

            <!-- Feature 38: Animated Stats -->
            <div class="stats-grid reveal-stone" id="statsGrid"
                style="margin-top: 5rem; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 3rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 4rem;">
                <div class="stat-item" style="text-align: center;">
                    <div class="stat-number" data-target="10" style="font-size: 3.5rem; font-weight: 200; color: #fff;">
                        0</div>
                    <div class="stat-label"
                        style="text-transform: uppercase; letter-spacing: 0.2em; font-size: 0.7rem; color: #FFD700;">
                        Years Experience</div>
                </div>
                <div class="stat-item" style="text-align: center;">
                    <div class="stat-number" data-target="500"
                        style="font-size: 3.5rem; font-weight: 200; color: #fff;">0</div>
                    <div class="stat-label"
                        style="text-transform: uppercase; letter-spacing: 0.2em; font-size: 0.7rem; color: #FFD700;">
                        Projects</div>
                </div>
                <div class="stat-item" style="text-align: center;">
                    <div class="stat-number" data-target="100"
                        style="font-size: 3.5rem; font-weight: 200; color: #fff;">0</div>
                    <div class="stat-label"
                        style="text-transform: uppercase; letter-spacing: 0.2em; font-size: 0.7rem; color: #FFD700;">
                        Locally Owned</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Feature 10: Testimonials -->
    <!-- Feature 2 & 4: Technical Joinery Lab -->
    <section id="engineering-lab" class="section"
        style="background: #050505; border-top: 1px solid var(--glass-border);">
        <div class="container">
            <h2 class="reveal-stone">The <span class="italic-accent">Engineering</span> Lab</h2>
            <p style="text-align: center; opacity: 0.6; margin-bottom: 4rem;">Deconstructing the Sovereign Mortise.
                ±0.1mm tolerance verified.</p>

            <div style="display: flex; flex-wrap: wrap; gap: 4rem; align-items: center; justify-content: center;">
                <!-- Isometric Exploded View -->
                <div style="flex: 1; min-width: 320px; position: relative;" class="reveal-stone">
                    <div id="joinery-render"
                        style="width: 100%; height: 450px; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 8px; position: relative; overflow: hidden; cursor: pointer;"
                        onclick="toggleSchematic()">
                        <!-- SVG Exploded View will go here -->
                        <svg viewBox="0 0 400 400" width="100%" height="100%" id="joint-svg">
                            <defs>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="2" result="coloredBlur" />
                                    <feMerge>
                                        <feMergeNode in="coloredBlur" />
                                        <feMergeNode in="SourceGraphic" />
                                    </feMerge>
                                </filter>
                            </defs>
                            <!-- Panel A (Gable) -->
                            <g id="panel-a" style="transition: transform 0.8s var(--ease-elastic);">
                                <path d="M100,150 L200,100 L200,300 L100,350 Z" fill="rgba(212, 175, 55, 0.1)"
                                    stroke="#D4AF37" stroke-width="1.5" />
                                <text x="110" y="250" fill="#D4AF37" font-size="10" style="opacity: 0.5;">VENEER
                                    CORE</text>
                            </g>
                            <!-- Panel B (Rail) - Exploded -->
                            <g id="panel-b"
                                style="transform: translate(80px, -40px); transition: transform 0.8s var(--ease-elastic);">
                                <path d="M220,110 L320,60 L320,100 L220,150 Z" fill="rgba(255,255,255,0.05)"
                                    stroke="#fff" stroke-width="1.5" />
                                <path d="M220,150 L320,100 L320,110 L220,160 Z" fill="rgba(255,255,255,0.02)"
                                    stroke="#fff" stroke-width="1.5" />
                            </g>
                            <!-- Schematic Overlays (Feature 4) -->
                            <g id="schematic-layer" style="opacity: 0; transition: opacity 0.5s ease;">
                                <line x1="200" y1="100" x2="280" y2="60" stroke="#00ffff" stroke-dasharray="4"
                                    stroke-width="1" />
                                <circle cx="200" cy="100" r="3" fill="#00ffff" />
                                <text x="220" y="80" fill="#00ffff" font-size="8">TOLERANCE: ±0.1mm</text>
                                <path d="M150,125 L250,75" stroke="#00ffff" stroke-width="0.5" />
                                <text x="180" y="100" fill="#00ffff" font-size="8"
                                    transform="rotate(-26 180,100)">18.02mm MEASURED</text>
                            </g>
                        </svg>
                        <!-- Instruction Badge -->
                        <div
                            style="position: absolute; bottom: 1rem; left: 1rem; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.2em; color:rgba(255,255,255,0.4);">
                            Click to Reveal Schematic</div>
                    </div>
                </div>

                <!-- Data Table (Feature 9) -->
                <div style="flex: 1; min-width: 300px;" class="reveal-stone">
                    <h3 style="color: #fff; margin-bottom: 2rem;">Structural <span
                            class="italic-accent">Integrity</span> Report</h3>
                    <div style="display: grid; gap: 1rem;">
                        <div class="card-gradient" style="padding: 1.5rem; background: rgba(15,25,40,0.3);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.7rem; color: #888;">JOINT TYPE</span>
                                <span style="font-size: 0.7rem; color: #FFD700;">BLIND DADO / SOVEREIGN MORTISE</span>
                            </div>
                            <div style="height: 2px; background: rgba(255,255,255,0.05); width: 100%;"></div>
                        </div>
                        <div class="card-gradient" style="padding: 1.5rem; background: rgba(15,25,40,0.3);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.7rem; color: #888;">LOAD CAPACITY</span>
                                <span style="font-size: 0.7rem; color: #FFD700;">120KG PER VERTICAL GABLE</span>
                            </div>
                            <div style="height: 2px; background: rgba(255,255,255,0.05); width: 100%;"></div>
                        </div>
                        <div class="card-gradient" style="padding: 1.5rem; background: rgba(15,25,40,0.3);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.7rem; color: #888;">HARDWARE COMPLIANCE</span>
                                <span style="font-size: 0.7rem; color: #FFD700;">BLUM TANDEMBOX / AVENTOS READY</span>
                            </div>
                            <div style="height: 2px; background: rgba(255,255,255,0.05); width: 100%;"></div>
                        </div>
                    </div>
                    <p style="margin-top: 2rem; font-size: 0.8rem; opacity: 0.5;">*Every panel is measured via laser
                        telemetry before final assembly to ensure theoretical design matches physical reality.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Feature 9: Precision Tolerance Table -->
    <section id="tolerance-log" class="section" style="background: #000; padding: 4rem 0;">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 2rem;"
                class="reveal-stone">
                <div>
                    <h2 style="margin: 0;">Precision <span class="italic-accent">Log</span></h2>
                    <p style="opacity: 0.5;">Live telemetry from the Sovereign Assembly Line.</p>
                </div>
                <div
                    style="font-size: 0.6rem; text-transform: uppercase; color: #FFD700; border: 1px solid #FFD700; padding: 0.5rem 1rem; border-radius: 2rem;">
                    STATUS: NOMINAL</div>
            </div>

            <div class="card-gradient reveal-stone"
                style="padding: 0; overflow: hidden; background: rgba(10,15,20,0.5); border: 1px solid rgba(255,255,255,0.05);">
                <table style="width: 100%; border-collapse: collapse; font-size: 0.75rem; text-align: left;">
                    <thead
                        style="background: rgba(255,255,255,0.02); text-transform: uppercase; letter-spacing: 0.1em; color: #888;">
                        <tr>
                            <th style="padding: 1.5rem;">COMPONENT ID</th>
                            <th style="padding: 1.5rem;">DESIGN SPEC</th>
                            <th style="padding: 1.5rem;">MEASURED</th>
                            <th style="padding: 1.5rem;">VARIANCE</th>
                            <th style="padding: 1.5rem;">STATUS</th>
                        </tr>
                    </thead>
                    <tbody style="color: #ccc;">
                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.03);">
                            <td style="padding: 1.5rem; font-family: monospace;">CARA-GABLE-041</td>
                            <td style="padding: 1.5rem;">845.00mm</td>
                            <td style="padding: 1.5rem;">845.02mm</td>
                            <td style="padding: 1.5rem; color: #00ff00;">+0.02mm</td>
                            <td style="padding: 1.5rem;"><span style="color:#00ff00;">● PASS</span></td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.03);">
                            <td style="padding: 1.5rem; font-family: monospace;">CARA-SHELF-098</td>
                            <td style="padding: 1.5rem;">564.00mm</td>
                            <td style="padding: 1.5rem;">563.95mm</td>
                            <td style="padding: 1.5rem; color: #00ff00;">-0.05mm</td>
                            <td style="padding: 1.5rem;"><span style="color:#00ff00;">● PASS</span></td>
                        </tr>
                        <tr>
                            <td style="padding: 1.5rem; font-family: monospace;">CARA-DOOR-112</td>
                            <td style="padding: 1.5rem;">716.00mm</td>
                            <td style="padding: 1.5rem;">716.01mm</td>
                            <td style="padding: 1.5rem; color: #00ff00;">+0.01mm</td>
                            <td style="padding: 1.5rem;"><span style="color:#00ff00;">● PASS</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Feature 10: Exclusive Client Project Feed -->
    <section id="client-feed" class="section" style="background: linear-gradient(to bottom, #000, #050505);">
        <div class="container reveal-stone">
            <div class="card-gradient"
                style="padding: 4rem; text-align: center; background: rgba(212, 175, 55, 0.02); border: 1px solid rgba(212, 175, 55, 0.1);">
                <div style="font-size: 3rem; margin-bottom: 1.5rem;">🔒</div>
                <h2 style="margin-bottom: 1rem;">The <span class="italic-accent">Sovereign</span> Portal</h2>
                <p style="max-width: 600px; margin: 0 auto 2.5rem; opacity: 0.6;">Exclusive real-time production feed
                    for active projects. Track your sanctuary's progress from raw timber to final polish.</p>
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <input type="text" placeholder="ACCESS CODE" class="form-input"
                        style="width: 200px; text-align: center; letter-spacing: 0.5em; background: rgba(0,0,0,0.5);">
                    <button class="btn-luxury"
                        onclick="alert('Access Code Required. Please contact your Project Lead.')">REVEAL FEED</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Curated Portfolio -->
    <section id="portfolio" class="section">
        <div class="container">
            <h2 class="reveal-stone" style="text-align: center; margin-bottom: 3rem;">Curated <span
                    class="italic-accent">Spaces</span></h2>

            <!-- Feature 33: Portfolio Filters -->
            <div class="filter-bar reveal-stone">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="kitchen">Kitchens</button>
                <button class="filter-btn" data-filter="wardrobe">Wardrobes</button>
            </div>

            <div class="gallery-grid" id="gallery-grid">
                <!-- Populated by JS -->
            </div>
        </div>
    </section>

    <!-- Feature 11: Programmatic Location Authority -->
    <section id="locations" class="section"
        style="background: #000; border-top: 1px solid rgba(255,255,255,0.05); padding-bottom: 2rem;">
        <div class="container reveal-stone">
            <h3
                style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.3em; color: #888; text-align: center; margin-bottom: 3rem;">
                Sovereign Operational Jurisdictions</h3>
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; opacity: 0.4;">
                <span style="font-size: 0.7rem; letter-spacing: 0.1em;">BANDAR SERI BEGAWAN</span>
                <span style="font-size: 0.7rem; letter-spacing: 0.1em;">KUALA BELAIT</span>
                <span style="font-size: 0.7rem; letter-spacing: 0.1em;">TUTONG DISTRICT</span>
                <span style="font-size: 0.7rem; letter-spacing: 0.1em;">SERIA ENERGY HUB</span>
                <span style="font-size: 0.7rem; letter-spacing: 0.1em;">MUARA PORT ZONE</span>
            </div>
            <p
                style="text-align: center; font-size: 0.6rem; margin-top: 3rem; opacity: 0.3; max-width: 800px; margin-left: auto; margin-right: auto;">
                Providing high-fidelity millwork solutions across all Brunei districts. Our logistics engine is
                optimized for cross-border engineering delivery to Sarawak and beyond.</p>
        </div>
    </section>

    <!-- Philosophy/Testimonial -->

    <!-- Feature 35: Before/After Transformation -->
    <section class="section" style="padding: 4rem 0;">
        <div class="container">
            <h3 class="reveal-stone" style="text-align: center; margin-bottom: 2rem;">Authentic <span
                    class="italic-accent">Transformation</span></h3>
            <div class="ba-slider reveal-stone"
                style="position: relative; max-width: 800px; height: 500px; margin: 0 auto; overflow: hidden; border-radius: 8px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
                <div class="ba-after"
                    style="position: absolute; top:0; left:0; width:100%; height:100%; background: url(images/img_2.jpg) center/cover no-repeat;">
                </div>
                <div class="ba-before"
                    style="position: absolute; top:0; left:0; width:50%; height:100%; background: url(images/img_1.jpg) center/cover no-repeat; border-right: 3px solid #FFD700; z-index: 2; filter: grayscale(100%) contrast(1.2);">
                </div>
                <input type="range" min="0" max="100" value="50" class="ba-range"
                    oninput="this.parentElement.querySelector('.ba-before').style.width = this.value + '%'"
                    style="position: absolute; top:0; left:0; width:100%; height:100%; opacity: 0; cursor: ew-resize; z-index: 3; margin: 0;">

                <span
                    style="position: absolute; bottom: 1rem; left: 1rem; z-index: 4; background: rgba(0,0,0,0.7); padding: 5px 10px; font-size: 0.8rem; pointer-events: none; border: 1px solid rgba(255,255,255,0.2);">BEFORE</span>
                <span
                    style="position: absolute; bottom: 1rem; right: 1rem; z-index: 4; background: rgba(0,0,0,0.7); padding: 5px 10px; font-size: 0.8rem; pointer-events: none; border: 1px solid #FFD700; color: #FFD700;">AFTER</span>
            </div>
            <p style="text-align: center; margin-top: 2rem; font-size: 0.9rem; opacity: 0.6; font-style: italic;">Drag
                slider to reveal the Caramella difference</p>
        </div>
    </section>

    <!-- Feature 3: Material Science Lab -->
    <section id="material-science" class="section"
        style="background: var(--bg-void); border-top: 1px solid rgba(255,255,255,0.05);">
        <div class="container">
            <h2 class="reveal-stone">Material <span class="italic-accent">Science</span></h2>
            <p style="text-align: center; opacity: 0.6; margin-bottom: 4rem;">Empirical data from the 2026 Durability
                Protocol.</p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 3rem;">
                <!-- Stress Test 1: Humidity -->
                <div class="card-gradient reveal-stone"
                    style="padding: 3rem; background: rgba(5,10,15,0.4); position: relative;">
                    <div
                        style="font-size: 0.6rem; color: #FFD700; text-transform: uppercase; letter-spacing: 0.2em; margin-bottom: 1rem;">
                        Protocol 03: Hydro-Stability</div>
                    <h3 style="color: #fff; margin-bottom: 1.5rem;">Tropical Endurance</h3>
                    <div style="margin-bottom: 2rem;">
                        <div
                            style="display: flex; justify-content: space-between; font-size: 0.7rem; margin-bottom: 0.5rem;">
                            <span>SWELING INDEX (24H SOAK)</span>
                            <span style="color: #FFD700;">&lt; 0.8%</span>
                        </div>
                        <div
                            style="height: 4px; background: rgba(255,255,255,0.05); width: 100%; border-radius: 2px; overflow: hidden;">
                            <div
                                style="height: 100%; width: 15%; background: #FFD700; animation: expandWidth 2s ease-out forwards;">
                            </div>
                        </div>
                    </div>
                    <p style="font-size: 0.85rem; line-height: 1.6;">Engineered for 95% relative humidity. Our core
                        material maintains structural geometry even in direct saturation events.</p>
                </div>

                <!-- Stress Test 2: Surface -->
                <div class="card-gradient reveal-stone"
                    style="padding: 3rem; background: rgba(5,10,15,0.4); position: relative;">
                    <div
                        style="font-size: 0.6rem; color: #FFD700; text-transform: uppercase; letter-spacing: 0.2em; margin-bottom: 1rem;">
                        Protocol 07: Surface Hardness</div>
                    <h3 style="color: #fff; margin-bottom: 1.5rem;">Diamond Resistance</h3>
                    <div style="margin-bottom: 2rem;">
                        <div
                            style="display: flex; justify-content: space-between; font-size: 0.7rem; margin-bottom: 0.5rem;">
                            <span>MOHS HARDNESS (COATING)</span>
                            <span style="color: #FFD700;">6H CERTIFIED</span>
                        </div>
                        <div
                            style="height: 4px; background: rgba(255,255,255,0.05); width: 100%; border-radius: 2px; overflow: hidden;">
                            <div
                                style="height: 100%; width: 85%; background: var(--ruby-grad); animation: expandWidth 2s ease-out forwards;">
                            </div>
                        </div>
                    </div>
                    <p style="font-size: 0.85rem; line-height: 1.6;">Anti-fingerprint nanotech combined with high-impact
                        resistance. Scratch-proof under standard industrial usage.</p>
                </div>
            </div>

            <style>
                @keyframes expandWidth {
                    from {
                        width: 0;
                    }
                }
            </style>
        </div>
    </section>
    <section id="about" class="section testimonials-section" style="padding-top: 0;">
        <div class="container reveal-stone">
            <div class="maker-card"
                style="display: flex; flex-wrap: wrap; gap: 2rem; align-items: center; background: linear-gradient(145deg, rgba(255,255,255,0.03), rgba(0,0,0,0.2)); padding: 3rem; border-radius: 1rem; border: 1px solid rgba(255,215,0,0.1);">
                <div class="maker-img"
                    style="flex: 0 0 150px; height: 150px; border-radius: 50%; background: #111; border: 2px solid #FFD700; overflow:hidden; margin: 0 auto;">
                    <img src="images/logo.png" style="width:100%; height:100%; object-fit: contain; padding: 10px;">
                </div>
                <div style="flex: 1; text-align: center;">
                    <h3 style="color: #FFD700; margin-top: 0;">The Artisan's Promise</h3>
                    <p style="font-size: 1.1rem; font-style: italic; opacity: 0.9;">"We don't just build, we engineer.
                        Every millimeter counts when creating a sanctuary."</p>
                    <div
                        style="margin-top: 1.5rem; display: flex; align-items: center; justify-content: center; gap: 1rem;">
                        <span style="font-family: cursive; font-size: 1.5rem; color: #FFD700;">Thomas K.</span>
                        <span
                            style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.5; border-left: 1px solid #666; padding-left: 1rem;">Founder
                            & Head Joiner</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Feature 40: FAQ Preview -->
    <section class="section" style="padding: 2rem 0;">
        <div class="container" style="max-width: 800px;">
            <h3 class="reveal-stone" style="text-align: center; margin-bottom: 2rem;">Common <span
                    class="italic-accent">Queries</span></h3>
            <div class="accordion">
                <details class="reveal-stone"
                    style="margin-bottom: 1rem; background: rgba(255,255,255,0.02); padding: 1rem; border-radius: 8px;">
                    <summary style="cursor: pointer; font-weight: bold; color: #fff;">How long is the fabrication
                        process?</summary>
                    <p style="margin-top: 1rem; opacity: 0.7; padding-left: 1rem; border-left: 2px solid #FFD700;">
                        Typically 3-4 weeks for design & fabrication, followed by a 1-day installation.</p>
                </details>
                <details class="reveal-stone"
                    style="margin-bottom: 1rem; background: rgba(255,255,255,0.02); padding: 1rem; border-radius: 8px;">
                    <summary style="cursor: pointer; font-weight: bold; color: #fff;">What materials do you use?
                    </summary>
                    <p style="margin-top: 1rem; opacity: 0.7; padding-left: 1rem; border-left: 2px solid #FFD700;">We
                        exclusively use moisture-resistant Plywood and High-Density MDF with zero-formaldehyde emission
                        (E0/ENF).</p>
                </details>
                <details class="reveal-stone"
                    style="margin-bottom: 1rem; background: rgba(255,255,255,0.02); padding: 1rem; border-radius: 8px;">
                    <summary style="cursor: pointer; font-weight: bold; color: #fff;">Do you provide 3D designs?
                    </summary>
                    <p style="margin-top: 1rem; opacity: 0.7; padding-left: 1rem; border-left: 2px solid #FFD700;">Yes,
                        every project begins with a photorealistic 3D render and parametric CAD drawings.</p>
                </details>
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <a href="faq.html" class="btn-luxury" style="padding: 0.5rem 1.5rem; font-size: 0.8rem;">View All
                    FAQs</a>
            </div>
        </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="section contact-section">
        <div class="container reveal-stone">
            <h2>Begin Your <span class="italic-accent">Transformation</span></h2>

            <div class="contact-details">
                <div>
                    <span class="contact-label">Showroom</span>
                    <div class="contact-value">Unit 22, Ground Floor, The Airport Mall</div>
                    <p style="margin-top: 1rem; opacity: 0.6;">Mon-Sat, 08:30-17:30</p>
                </div>
                <div>
                    <span class="contact-label">WhatsApp</span>
                    <div class="contact-value">+673 718 7185</div>
                    <div class="contact-value" style="font-size: 1rem; margin-top: 1rem; opacity: 0.7;">
                        caramellabrunei@gmail.com</div>
                </div>
            </div>

            <!-- Feature 21: Contact Form -->
            <div class="contact-form-container">
                <form id="inquiryForm">
                    <div class="form-group">
                        <label class="form-label">Name</label>
                        <input type="text" id="formName" class="form-input" required placeholder="Your Name">
                        <div class="form-error" id="nameError">Please enter a valid name.</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone (WhatsApp)</label>
                        <input type="tel" id="formPhone" class="form-input" required placeholder="+673 888 8888">
                        <div class="form-error" id="phoneError">Please enter a valid Brunei number (7 digits).</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Project Details</label>
                        <textarea id="formMessage" class="form-textarea" required
                            placeholder="Describe your kitchen or wardrobe needs..."></textarea>
                    </div>
                    <button type="submit" class="btn-luxury" style="width: 100%; border: none; cursor: pointer;">Send
                        Inquiry</button>
                </form>

                <div id="formSuccess" class="form-success">
                    <h3>Inquiry Received</h3>
                    <p>We will contact you via WhatsApp shortly to schedule your free consultation.</p>
                </div>
            </div>


            <!-- Feature 22: Google Maps Embed -->
            <div class="map-container reveal-stone">
                <iframe class="map-iframe"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3975.257618685163!2d114.94364417578332!3d4.903083395079869!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3222f543163158e9%3A0xc39f99797de96c21!2sThe%20Airport%20Mall!5e0!3m2!1sen!2sbn!4v1705625064789!5m2!1sen!2sbn"
                    allowfullscreen="" loading="lazy" title="Caramella Brunei Location"
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>

            <!-- Social Icons Bar -->
            <div class="social-icons-bar">
                <a href="https://maps.app.goo.gl/FzZWbZtiQCDixXZt5" target="_blank" aria-label="Showroom Location">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path
                            d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                    </svg>
                </a>
                <a href="https://www.instagram.com/caramellabrunei/" target="_blank" aria-label="Instagram">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path
                            d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                    </svg>
                </a>
                <a href="https://www.facebook.com/caramellabrunei2015/" target="_blank" aria-label="Facebook">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path
                            d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                    </svg>
                </a>
                <a href="mailto:caramellabrunei@gmail.com" target="_blank" aria-label="Email">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path
                            d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z" />
                    </svg>
                </a>
                <a href="https://wa.me/6737187185" target="_blank" aria-label="WhatsApp">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path
                            d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z" />
                    </svg>
                </a>
            </div>


            <div
                style="margin-top: 3rem; opacity: 0.3; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.2em;">
                &copy; <span id="year">2025</span> Caramella Trading Company. 100% Brunei Owned & Operated. <span
                    style="opacity: 0.6; font-size: 0.8em; margin-left: 10px;">Reg No: P00100256</span>
            </div>
        </div>
    </section>

    <!-- Lightbox -->
    <div id="lightbox" class="lightbox">
        <span class="close-lightbox">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>

    <!-- Feature 8: Structural Valuation Engine -->
    <div id="calcModal" class="lightbox">
        <div class="calc-container"
            style="background: #050505; padding: 3rem; border-radius: 1.5rem; max-width: 600px; margin: auto; position: relative; border: 1px solid rgba(255,215,0,0.3); width: 95%; box-shadow: 0 40px 100px rgba(0,0,0,0.9);">
            <span class="close-calc"
                style="position: absolute; top: 1.5rem; right: 1.5rem; cursor: pointer; font-size: 2rem; color: #fff; opacity: 0.5;">&times;</span>
            <h3
                style="color: #FFD700; margin-top: 0; text-align: center; margin-bottom: 2rem; letter-spacing: 0.3em; text-transform: uppercase; font-size: 1rem;">
                Structural <span class="italic-accent">Valuation</span> Engine</h3>

            <div style="display: grid; gap: 1.5rem;">
                <!-- Type Selection -->
                <div>
                    <label class="form-label">System Architecture</label>
                    <div class="filter-bar" style="justify-content: start; gap: 0.5rem; margin-bottom: 0;">
                        <button class="filter-btn active calc-type" style="flex: 1;" data-value="kitchen">Culinary
                            Architecture</button>
                        <button class="filter-btn calc-type" style="flex: 1;" data-value="wardrobe">Sartorial
                            Living</button>
                    </div>
                </div>

                <!-- Material Grade -->
                <div>
                    <label class="form-label">Material Core Grade</label>
                    <select id="calcMaterial" class="form-input" onchange="calculate()">
                        <option value="1.0">Sovereign Ply-Core (Standard)</option>
                        <option value="1.25">ENF V3 Nano-Core (Premium)</option>
                        <option value="1.5">Zero-Formaldehyde Solid-Ply (Elite)</option>
                    </select>
                </div>

                <!-- Hardware Tier -->
                <div>
                    <label class="form-label">Hardware Logic</label>
                    <select id="calcHardware" class="form-input" onchange="calculate()">
                        <option value="150">Hettich / Basic Soft-Close</option>
                        <option value="350">Blum Onyx / Full Servo-Drive</option>
                        <option value="600">Grass Vionaro / Bespoke Italian</option>
                    </select>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <label class="form-label">Planar Length (FT)</label>
                        <input type="number" id="calcLength" class="form-input" value="10" min="5"
                            oninput="calculate()">
                    </div>
                    <div id="countertopSection">
                        <label class="form-label">Surface Material</label>
                        <select id="calcCounter" class="form-input" onchange="calculate()">
                            <option value="0">None</option>
                            <option value="250">Quartz V1</option>
                            <option value="450">Sintered Stone V2</option>
                        </select>
                    </div>
                </div>

                <div class="calc-result"
                    style="text-align: center; margin-top: 1rem; padding: 2rem; border: 1px solid rgba(255,215,0,0.1); border-radius: 1rem; background: rgba(255,215,0,0.02);">
                    <div
                        style="font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.2em; color: #888; margin-bottom: 0.5rem;">
                        Engineering Asset Value</div>
                    <div id="calcPrice" style="font-size: 2.5rem; color: #FFD700; font-weight: 700;">$4,250 - $4,800
                    </div>
                    <div style="font-size: 0.6rem; color: #555; margin-top: 1rem; text-transform: uppercase;">Includes
                        CNC Fabrication & Technical Installation</div>
                </div>

                <button class="btn-luxury" style="width: 100%;" id="calcBookBtn">Calibrate Final Spec</button>
            </div>
        </div>
    </div>

    <script>
        // ===========================================
        // AWARD-WINNING INTERACTIONS V2.0
        // ===========================================

        // Feature 49: Robust Error Handling
        window.onerror = function (msg, url, line, col, error) {
            console.warn("[Caramella System] Handled:", msg);
            return false;
        };

        document.addEventListener('DOMContentLoaded', () => {
            // Phase 2 Logic
            // F42: Greeting
            const h = new Date().getHours();
            const greet = h < 12 ? 'Good Morning' : h < 18 ? 'Good Afternoon' : 'Good Evening';
            const gEl = document.getElementById('greeting');
            if (gEl) gEl.innerText = greet + ", BRUNEI";

            // F2: Toggle
            window.toggleTheme = () => {
                document.body.classList.toggle('light-mode');
                const btn = document.querySelector('.nav-btn');
                if (btn) btn.innerHTML = document.body.classList.contains('light-mode') ? '🌙' : '☀';
            };

            // F10: Haptics
            if (navigator.vibrate) {
                document.querySelectorAll('button, a').forEach(b => {
                    b.addEventListener('pointerdown', () => navigator.vibrate(5));
                });
            }

            // Feature 50: System Ready Badge
            console.log("%c CARAMELLA BRUNEI %c SYSTEM ONLINE ", "background: #FFD700; color: #000; font-weight: bold; padding: 5px;", "background: #111; color: #fff; padding: 5px;");

            initPreloader();
            initParticles();
            initGallery();
            initHero();
            initAnimations();
            initAwardCursor();
            initNavbar();
            initMobileMenu();
            initCounterAnimation();
            initMagneticButtons();
            initScrollProgress(); // Feature 2: Scroll Progress
            initContactForm(); // Feature 21: Contact Form

            // Feature 11: Configurator
            window.setMaterial = (part, color) => {
                const el = document.querySelector(`.${part}-part`);
                if (el) {
                    el.style.fill = color;
                    if (navigator.vibrate) navigator.vibrate(10);
                }
            };

            // Feature 12: Wishlist System
            let wishlist = JSON.parse(localStorage.getItem('caramella_wishlist') || '[]');

            window.toggleWishlist = (url, alt) => {
                const index = wishlist.findIndex(item => item.url === url);
                if (index === -1) {
                    wishlist.push({ url, alt });
                } else {
                    wishlist.splice(index, 1);
                }
                localStorage.setItem('caramella_wishlist', JSON.stringify(wishlist));
                updateWishlistUI();
                if (navigator.vibrate) navigator.vibrate([10, 30, 10]);
            };

            window.updateWishlistUI = () => {
                const badge = document.getElementById('wish-count-badge');
                if (badge) {
                    badge.innerText = wishlist.length;
                    badge.style.display = wishlist.length > 0 ? 'flex' : 'none';
                }

                // Update dots on cards
                document.querySelectorAll('.wishlist-trigger').forEach(btn => {
                    const url = btn.parentElement.querySelector('img').src;
                    btn.classList.toggle('active', wishlist.some(item => url.includes(item.url)));
                });
            };

            window.showWishlist = () => {
                const modal = document.getElementById('wishlist-modal');
                const grid = document.getElementById('wishlist-display-grid');
                grid.innerHTML = wishlist.length > 0 ? '' : '<p style="text-align:center; opacity:0.5; grid-column: 1/-1;">Your shortlist is empty.</p>';

                wishlist.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'wish-item';
                    div.innerHTML = `
                        <img src="${item.url}" alt="${item.alt}">
                        <div class="wishlist-trigger active" onclick="toggleWishlist('${item.url}', '${item.alt}'); showWishlist();">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.89-8.89 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                        </div>
                    `;
                    grid.appendChild(div);
                });

                modal.classList.add('visible');
            };

            window.closeWishlist = () => {
                document.getElementById('wishlist-modal').classList.remove('visible');
            };

            updateWishlistUI();
        });

        // Preloader
        function initPreloader() {
            const preloader = document.getElementById('preloader');
            if (!preloader) return;
            window.addEventListener('load', () => {
                setTimeout(() => preloader.classList.add('hidden'), 800);
            });
        }
        // Auto-update copyright year
        document.getElementById('year').textContent = new Date().getFullYear();

        // Feature 2: Scroll Progress Indicator
        function initScrollProgress() {
            const progressBar = document.getElementById('scrollProgress');
            if (!progressBar) return;

            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                progressBar.style.width = scrollPercent + '%';
            });
        }

        // Feature 10: Testimonial Carousel
        function initTestimonials() {
            const cards = document.querySelectorAll('.testimonial-card');
            const dots = document.querySelectorAll('.testimonial-dot');
            if (cards.length === 0) return;

            let currentIndex = 0;

            function showTestimonial(index) {
                cards.forEach((card, i) => {
                    card.classList.remove('active', 'prev');
                    if (i === index) {
                        card.classList.add('active');
                    } else if (i < index || (index === 0 && i === cards.length - 1)) {
                        card.classList.add('prev');
                    }
                });

                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
            }

            // Auto-rotate every 5 seconds
            setInterval(() => {
                currentIndex = (currentIndex + 1) % cards.length;
                showTestimonial(currentIndex);
            }, 5000);

            // Click on dots
            dots.forEach((dot, i) => {
                dot.addEventListener('click', () => {
                    currentIndex = i;
                    showTestimonial(currentIndex);
                });
            });
        }

        // Initialize testimonials
        initTestimonials();


        // Feature 13: Back-to-Top Button with Progress Ring
        function initBackToTop() {
            const btn = document.getElementById('backToTop');
            const progressRing = btn?.querySelector('.progress-ring');
            if (!btn || !progressRing) return;

            const circumference = 2 * Math.PI * 22; // r=22
            progressRing.style.strokeDasharray = circumference;

            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = scrollTop / docHeight;

                // Show/hide button
                if (scrollTop > 300) {
                    btn.classList.add('visible');
                } else {
                    btn.classList.remove('visible');
                }

                // Update progress ring
                const offset = circumference - (scrollPercent * circumference);
                progressRing.style.strokeDashoffset = offset;
            });

            btn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
        initBackToTop();

        // Feature 14: Cookie Consent Logic
        function initCookieBanner() {
            const banner = document.getElementById('cookieBanner');
            const btn = document.getElementById('acceptCookies');
            if (!banner || localStorage.getItem('cookiesAccepted')) return;

            // Show after 3s
            setTimeout(() => {
                banner.classList.add('visible');
            }, 3000);

            btn.addEventListener('click', () => {
                banner.classList.remove('visible');
                localStorage.setItem('cookiesAccepted', 'true');
            });
        }
        initCookieBanner();

        // Feature 16: Dynamic Social Proof

        // 1. ASSETS - Top 6 Showcase (More in Design Concepts)
        // 1. ASSETS - Top 6 Showcase (More in Design Concepts)
        const assetUrls = [
            "images/img_4.jpg",
            "images/img_1.jpg",
            "images/img_2.jpg",
            "images/img_3.jpg",
            "images/img_5.jpg",
            "images/img_6.jpg"
        ];

        // SEO-Optimized Alt Tags for Brunei Market
        const seoAltTags = [
            "Custom kitchen cabinets Brunei - Scandinavian minimalist design by Caramella",
            "Luxury walk-in wardrobe Brunei - Premium closet system with LED lighting",
            "Modern TV console unit Brunei - Bespoke entertainment center installation",
            "Contemporary bathroom vanity Brunei - Moisture-resistant cabinet design",
            "High-end kitchen island Brunei - CNC precision countertop joinery",
            "Tropical climate wardrobe Brunei - Humidity-resistant storage solutions",
            "Premium kitchen renovation Brunei - Full cabinet fit-out by Caramella",
            "Custom built-in cabinetry Brunei - Architectural joinery specialist",
            "Luxury interior design Brunei - Bespoke furniture manufacturing",
            "Modern kitchen design BSB - Best kitchen contractor Brunei Muara",
            "Premium wardrobe installation Brunei - Master bedroom storage solutions",
            "Custom carpentry work Brunei - Precision CNC wood cutting services",
            "Kitchen cabinet supplier Brunei - Quality melamine and plywood materials",
            "Interior fit-out contractor Brunei - Residential renovation specialist",
            "Bespoke joinery Brunei Darussalam - Award-winning cabinet maker",
            "Luxury home renovation Brunei - High-end interior design solutions",
            "Custom wardrobe design Brunei - Walk-in closet specialist BSB",
            "Modern minimalist kitchen Brunei - Contemporary cabinet installation",
            "Premium countertop installation Brunei - Solid surface and quartz options",
            "Best interior designer Brunei - Caramella architectural joinery",
            "Kitchen renovation contractor BSB - Quality craftsmanship guaranteed",
            "Luxury bathroom cabinets Brunei - Waterproof vanity solutions",
            "Custom entertainment unit Brunei - Built-in TV wall installation",
            "Premium bedroom furniture Brunei - Bespoke headboard and wardrobes",
            "Modern office fit-out Brunei - Commercial interior contractor",
            "High-quality kitchen cabinets Brunei - European hardware supplier",
            "Custom shoe rack Brunei - Entryway storage cabinet design",
            "Luxury dressing room Brunei - Premium closet organization system",
            "Contemporary dining furniture Brunei - Custom sideboard installation",
            "Best renovation contractor Brunei - Trusted since 2015"
        ];

        function initGallery() {
            const grid = document.getElementById('gallery-grid');
            const shuffled = [...assetUrls].sort(() => 0.5 - Math.random());
            let currentIndex = 0;
            const batchSize = 6;

            function loadBatch() {
                const endIndex = Math.min(currentIndex + batchSize, shuffled.length);

                for (let i = currentIndex; i < endIndex; i++) {
                    const url = shuffled[i];
                    const altText = seoAltTags[i % seoAltTags.length];
                    const el = document.createElement('div');
                    el.className = 'gallery-item reveal-stone';

                    // Assign category for Feature 33
                    const cats = ['kitchen', 'wardrobe'];
                    el.dataset.category = cats[i % cats.length];

                    // Feature 15: Lazy Loading Blur-up & Feature 12: Wishlist
                    el.innerHTML = `
                        <img src="${url}" loading="lazy" alt="${altText}" class="blur-load" onload="this.classList.add('loaded')">
                        <div class="wishlist-trigger" onclick="event.stopPropagation(); toggleWishlist('${url}', '${altText}')" id="wish-${i}">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.89-8.89 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                        </div>
                    `;
                    el.onclick = () => {
                        const lb = document.getElementById('lightbox');
                        document.getElementById('lightbox-img').src = url;
                        document.getElementById('lightbox-img').alt = altText;
                        lb.classList.add('active');
                    };

                    // Attach Microscope
                    if (typeof attachMicroscope === 'function') {
                        attachMicroscope(el, url);
                    }

                    grid.appendChild(el);
                }

                currentIndex = endIndex;

                // Remove Load More button if all images loaded
                if (currentIndex >= shuffled.length) {
                    const loadMoreBtn = document.getElementById('load-more-btn');
                    if (loadMoreBtn) loadMoreBtn.remove();
                }
            }

            // Load first batch
            loadBatch();

            // Create Load More button
            if (shuffled.length > batchSize) {
                const loadMoreBtn = document.createElement('button');
                loadMoreBtn.id = 'load-more-btn';
                loadMoreBtn.className = 'btn-luxury';
                loadMoreBtn.textContent = 'Load More';
                loadMoreBtn.style.margin = '3rem auto';
                loadMoreBtn.style.display = 'block';
                loadMoreBtn.style.position = 'relative';
                loadMoreBtn.style.zIndex = '10';
                loadMoreBtn.onclick = loadBatch;
                grid.parentElement.appendChild(loadMoreBtn);
            }

            // Close Lightbox
            document.querySelector('.close-lightbox').onclick = () => document.getElementById('lightbox').classList.remove('active');
            document.getElementById('lightbox').onclick = (e) => {
                if (e.target === document.getElementById('lightbox')) document.getElementById('lightbox').classList.remove('active');
            };

            // Feature 33: Portfolio Filters Logic
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    const filter = btn.dataset.filter;
                    const items = document.querySelectorAll('.gallery-item');

                    items.forEach(item => {
                        const cat = item.dataset.category;
                        // Simple category mapping since we random assign
                        if (filter === 'all' || cat === filter) {
                            item.style.display = 'block';
                            item.classList.remove('reveal-stone');
                            void item.offsetWidth; // Reflow
                            item.classList.add('reveal-stone');
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
        }

        function initHero() {
            const container = document.querySelector('.hero-bg-slider');
            // User-selected premium showcase images
            const slides = [
                "https://static.wixstatic.com/media/0bdd38_0780da52ffb64b20a389602f32b546a8~mv2.jpg",
                "https://static.wixstatic.com/media/0bdd38_adee565ffe4c4239811a64c1e88ba479~mv2.jpg",
                "https://static.wixstatic.com/media/0bdd38_3b842e104b9a4ac8bdd9f6ec840e8f1b~mv2.jpg",
                "https://static.wixstatic.com/media/0bdd38_6320f0df73fc4ced9aa1f0eb0c816244~mv2.jpg"
            ];

            const img = new Image();
            img.src = slides[0];
            img.onload = () => {
                slides.forEach((url, i) => {
                    const d = document.createElement('div');
                    d.className = `hero-slide ${i === 0 ? 'active' : ''}`;
                    d.style.backgroundImage = `url('${url}')`;
                    container.appendChild(d);
                });

                let cur = 0;
                setInterval(() => {
                    const els = document.querySelectorAll('.hero-slide');
                    els[cur].classList.remove('active');
                    cur = (cur + 1) % els.length;
                    els[cur].classList.add('active');
                }, 8000); // Calm: 6000ms â†’ 8000ms for contemplative viewing
            };
        }

        function initRefraction() {
            if (window.matchMedia("(pointer: coarse)").matches) return;
            const cards = document.querySelectorAll('.service-card, .hero-badge');
            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = ((e.clientX - rect.left) / rect.width) * 100;
                    const y = ((e.clientY - rect.top) / rect.height) * 100;
                    card.style.setProperty('--x', `${x}%`);
                    card.style.setProperty('--y', `${y}%`);
                });
            });
        }

        function initAnimations() {
            initRefraction(); // Activate physics
            const obs = new IntersectionObserver(entries => {
                entries.forEach(e => {
                    if (e.isIntersecting) e.target.classList.add('visible');
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.reveal-stone').forEach(el => obs.observe(el));
        }

        function initParticles() {
            const container = document.getElementById('particles');
            if (!container || window.innerWidth < 768) return; // Skip on mobile

            const particleCount = 15;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                particle.style.width = (2 + Math.random() * 4) + 'px';
                particle.style.height = particle.style.width;
                container.appendChild(particle);
            }
        }

        function initAwardCursor() {
            const cursor = document.querySelector('.cursor');
            const cursorDot = document.querySelector('.cursor-dot');
            if (!cursor || window.innerWidth < 968) return; // Skip on mobile/tablet

            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
                cursorDot.style.left = e.clientX + 'px';
                cursorDot.style.top = e.clientY + 'px';
            });

            const hoverElements = document.querySelectorAll('a, button, .gallery-item, .service-box');
            hoverElements.forEach(el => {
                el.addEventListener('mouseenter', () => cursor.classList.add('hovering'));
                el.addEventListener('mouseleave', () => cursor.classList.remove('hovering'));
            });
        }

        function initNavbar() {
            window.addEventListener('scroll', () => {
                const nav = document.querySelector('.navbar');
                if (window.scrollY > 50) nav.classList.add('scrolled');
                else nav.classList.remove('scrolled');
            });
        }

        function initMobileMenu() {
            const toggle = document.querySelector('.menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            if (!toggle || !navLinks) return;

            toggle.addEventListener('click', () => {
                navLinks.classList.toggle('active');
                toggle.textContent = navLinks.classList.contains('active') ? '\u2715' : '\u2630';
            });

            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                    toggle.textContent = '\u2630';
                });
            });
        }

        // Animated Counters for Trust Numbers
        function initCounterAnimation() {
            const trustNumbers = document.querySelectorAll('.trust-number');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounter(entry.target);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            trustNumbers.forEach(num => observer.observe(num));
        }

        function animateCounter(el) {
            const text = el.textContent;
            const hasPlus = text.includes('+');
            const numMatch = text.match(/\d+/);
            if (!numMatch) return; // Non-numeric like "CNC"

            const target = parseInt(numMatch[0]);
            let current = 0;
            const duration = 4000; // Calm: 2000ms â†’ 4000ms for gentle counting
            const step = target / (duration / 16);

            function update() {
                current += step;
                if (current >= target) {
                    el.textContent = target + (hasPlus ? '+' : '');
                } else {
                    el.textContent = Math.round(current) + (hasPlus ? '+' : '');
                    requestAnimationFrame(update);
                }
            }
            update();
        }

        // Feature 21: Contact Form Logic
        function initContactForm() {
            const form = document.getElementById('inquiryForm');
            if (!form) return;

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const btn = form.querySelector('button');
                const name = document.getElementById('formName').value;
                const phone = document.getElementById('formPhone').value;
                const msg = document.getElementById('formMessage').value;
                const phoneError = document.getElementById('phoneError');

                // Validation: Check for numbers in phone
                const phoneRegex = /^[0-9+ ]{7,}$/;
                if (!phoneRegex.test(phone)) {
                    phoneError.style.display = 'block';
                    document.getElementById('formPhone').focus();
                    return;
                } else {
                    phoneError.style.display = 'none';
                }

                // Loading State
                const originalText = btn.innerText;
                btn.innerText = 'Sending...';
                btn.style.opacity = '0.7';
                btn.disabled = true;

                // Simulate API Call
                setTimeout(() => {
                    // Success UI
                    form.style.display = 'none';
                    document.getElementById('formSuccess').style.display = 'block';

                    // UX: Open WhatsApp with pre-filled message
                    const waMsg = `Hi Caramella, I'm ${name}. I'm interested in: ${msg}. My number is ${phone}.`;
                    const waUrl = `https://wa.me/6737187185?text=${encodeURIComponent(waMsg)}`;

                    // Small delay to let user see "success" before tab switch
                    setTimeout(() => {
                        window.open(waUrl, '_blank');
                    }, 1000);

                }, 1500);
            });
        }

        // Feature 34: Price Calculator Logic
        function initCalculator() {
            const modal = document.getElementById('calcModal');
            if (!modal) return;

            // Buttons
            const types = document.querySelectorAll('.calc-type');
            const lengthInput = document.getElementById('calcLength');
            const counterSelect = document.getElementById('calcCounter');
            const priceDisplay = document.getElementById('calcPrice');
            const closeBtn = document.querySelector('.close-calc');
            const bookBtn = document.getElementById('calcBookBtn');
            const counterSection = document.getElementById('countertopSection');

            // Open/Close logic
            window.openCalc = () => {
                modal.classList.add('active');
                // Center modal content
                const container = modal.querySelector('.calc-container');
                container.style.marginTop = '10vh';
                calculate();
            };

            closeBtn.onclick = () => modal.classList.remove('active');

            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.remove('active');
            });

            if (bookBtn) {
                bookBtn.onclick = () => {
                    modal.classList.remove('active');
                    const contactSection = document.getElementById('contact');
                    if (contactSection) contactSection.scrollIntoView({ behavior: 'smooth' });

                    const type = document.querySelector('.calc-type.active').innerText;
                    const len = lengthInput.value;
                    const est = priceDisplay.innerText;
                    const msg = document.getElementById('formMessage');
                    if (msg) msg.value = `I'm interested in a ${type} (approx ${len}ft). Estimate was ${est}.`;
                };
            }

            types.forEach(btn => {
                btn.addEventListener('click', () => {
                    types.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    calculate();
                });
            });

            if (lengthInput) lengthInput.addEventListener('input', calculate);
        }
        initCalculator();

        function calculate() {
            const typeBtn = document.querySelector('.calc-type.active');
            const lengthInput = document.getElementById('calcLength');
            const materialSelect = document.getElementById('calcMaterial');
            const hardwareSelect = document.getElementById('calcHardware');
            const counterSelect = document.getElementById('calcCounter');
            const priceDisplay = document.getElementById('calcPrice');
            const counterSection = document.getElementById('countertopSection');

            if (!typeBtn || !lengthInput) return;

            const type = typeBtn.dataset.value;
            const len = parseFloat(lengthInput.value) || 0;
            const matMultiplier = parseFloat(materialSelect.value) || 1.0;
            const hardwareRate = parseFloat(hardwareSelect.value) || 150;
            const counterRate = parseFloat(counterSelect.value) || 0;

            // Base Structural Yield per Linear Foot
            let baseRate = (type === 'kitchen') ? 220 : 180;

            if (type === 'wardrobe') {
                if (counterSection) counterSection.style.display = 'none';
            } else {
                if (counterSection) counterSection.style.display = 'block';
            }

            const total = (baseRate * len * matMultiplier) + (hardwareRate * len) + (counterRate * len);
            const min = Math.round(total * 0.95);
            const max = Math.round(total * 1.05);

            if (priceDisplay) {
                priceDisplay.innerText = `$${min.toLocaleString()} - $${max.toLocaleString()}`;
                if (navigator.vibrate) navigator.vibrate(5);
            }
        }

        // Feature 38: Animated Stats (Intersection Observer)
        function initStats() {
            const stats = document.querySelectorAll('.stat-number');
            if (stats.length === 0) return;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = parseInt(entry.target.dataset.target);
                        animateValue(entry.target, 0, target, 2000);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });

            stats.forEach(stat => observer.observe(stat));
        }

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    if (end === 100) obj.innerHTML += '%';
                    if (end === 500) obj.innerHTML += '+';
                    if (end === 10) obj.innerHTML += '+';
                }
            };
            window.requestAnimationFrame(step);
        }
        initStats();

    </script>
    <script>
        // ===========================================
        // SAPPHIRE ENGINE V5: LIQUID PHYSICS 
        // ===========================================
        function initMagneticButtons() {
            // STOP PHYSICS ON MOBILE (SAVES BATTERY)
            if (window.matchMedia("(pointer: coarse)").matches) return;
            const buttons = document.querySelectorAll('.btn-luxury');

            buttons.forEach(btn => {
                btn.addEventListener('mousemove', (e) => {
                    const rect = btn.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;

                    // Magnetic Pull Strength
                    const strength = 0.4;

                    btn.style.transform = `translate(${x * strength}px, ${y * strength}px)`;
                    btn.style.transition = 'transform 0.1s cubic-bezier(0.165, 0.84, 0.44, 1)'; // Instant response
                });

                btn.addEventListener('mouseleave', () => {
                    btn.style.transform = 'translate(0, 0)';
                    btn.style.transition = 'transform 0.6s cubic-bezier(0.19, 1, 0.22, 1)'; // Elastic snap back
                });
            });
        }
    </script>

    <!-- Feature 48: Print Styles & Feature 39: Gradient Borders -->
    <style>
        .card-gradient {
            background: linear-gradient(var(--bg-void), var(--bg-void)) padding-box,
                var(--gold-grad) border-box;
            border: 1px solid transparent !important;
            border-radius: 1rem;
        }

        @media print {
            body {
                background: #fff !important;
                color: #000 !important;
            }

            .hero,
            .particles-container,
            .cursor,
            .whatsapp-float,
            .scroll-progress,
            .lightbox,
            .menu-toggle,
            .newsletter,
            footer,
            nav,
            video {
                display: none !important;
            }

            .section {
                page-break-inside: avoid;
                color: #000 !important;
            }

            * {
                text-shadow: none !important;
                box-shadow: none !important;
            }
        }

        /* Feature 36: Parallax Override */
        .hero {
            background-attachment: fixed !important;
        }
    </style>

    <!-- Feature 11: Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <div class="nav-items">
            <a href="index.html" class="nav-item active">
                <span class="nav-icon">🏠</span>
                <span>Home</span>
            </a>
            <a href="portfolio.html" class="nav-item">
                <span class="nav-icon">📁</span>
                <span>Work</span>
            </a>
            <a href="inspiration.html" class="nav-item">
                <span class="nav-icon">💡</span>
                <span>Ideas</span>
            </a>
            <a href="#" onclick="showWishlist(); return false;" class="nav-item">
                <span class="nav-icon">❤️</span>
                <span id="wish-count-badge" class="nav-badge" style="display:none; top: 5px; right: 5px;">0</span>
                <span>Shortlist</span>
            </a>
            <a href="https://wa.me/6737187185" target="_blank" class="nav-item">
                <span class="nav-icon">💬</span>
                <span>Chat</span>
            </a>
        </div>
    </nav>

    <!-- Feature 12: Wishlist Modal -->
    <div id="wishlist-modal" class="wishlist-modal">
        <div class="container">
            <h2 style="text-align: center; color: #FFD700;">My <span class="italic-accent">Shortlist</span></h2>
            <div id="wishlist-display-grid" class="wishlist-grid"></div>
            <div
                style="text-align: center; margin-top: 3rem; display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center;">
                <button class="btn-luxury" onclick="closeWishlist()" style="background: rgba(255,255,255,0.05);">Back to
                    Gallery</button>
                <button class="btn-luxury" onclick="generateManifest()">Generate BIM/CAD Manifest</button>
                <button class="btn-luxury"
                    onclick="alert('Inquiry for shortlist sent to WhatsApp!'); closeWishlist()">Inquire for All
                    Items</button>
            </div>
        </div>
    </div>

    <div id="loader" class="loader-overlay" style="display: flex; flex-direction: column; gap: 2rem;">
        <div class="zero-g-core" style="position: relative; width: 120px; height: 120px;">
            <svg viewBox="0 0 100 100" width="120" height="120"
                style="filter: drop-shadow(0 0 10px rgba(255,215,0,0.5));">
                <path id="loader-path" d="M50 10 A40 40 0 0 1 50 90 A40 40 0 0 1 50 10" fill="none" stroke="#FFD700"
                    stroke-width="1.5" stroke-linecap="round" />
            </svg>
            <!-- Physics Particles -->
            <div class="physics-particle" style="--d: 0s; --x: 30px; --y: -40px;"></div>
            <div class="physics-particle" style="--d: 0.5s; --x: -50px; --y: 20px;"></div>
            <div class="physics-particle" style="--d: 1s; --x: 40px; --y: 50px;"></div>
        </div>
        <div
            style="font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.4em; color: #FFD700; opacity: 0.8; animation: pulse 2s infinite;">
            Calibrating Precision</div>
        <style>
            .physics-particle {
                position: absolute;
                top: 50%;
                left: 50%;
                width: 4px;
                height: 40px;
                background: linear-gradient(to bottom, #FFD700, transparent);
                border-radius: 2px;
                opacity: 0;
                animation: zeroG 3s infinite linear;
                animation-delay: var(--d);
            }

            @keyframes zeroG {
                0% {
                    transform: translate(var(--x), var(--y)) scale(0);
                    opacity: 0;
                }

                50% {
                    opacity: 0.8;
                }

                100% {
                    transform: translate(0, 0) scale(1);
                    opacity: 0;
                }
            }

            #loader-path {
                stroke-dasharray: 251;
                stroke-dashoffset: 251;
                animation: drawLogo 2.5s ease-in-out infinite;
            }

            @keyframes pulse {

                0%,
                100% {
                    opacity: 0.4;
                }

                50% {
                    opacity: 1;
                }
            }
        </style>
    </div>

    <!-- Feature 22: Sticky FAB -->
    <a href="https://wa.me/6737187185" target="_blank" class="sticky-fab" aria-label="Book on WhatsApp">
        <svg viewBox="0 0 24 24" width="30" height="30" fill="#FFF">
            <path
                d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z" />
        </svg>
    </a>

    <!-- Feature 100: App Polish -->
    <style>
        html,
        body {
            overscroll-behavior-y: none;
            touch-action: pan-y;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }

        input,
        textarea,
        p,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            user-select: text;
            -webkit-user-select: text;
        }

        a:active,
        button:active,
        .btn-luxury:active {
            transform: scale(0.96);
        }

        /* Feature 11 & 12: Utility Styles */
        .hull-part,
        .counter-part,
        .handle-part {
            transition: fill 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        .wishlist-trigger {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .wishlist-trigger:hover {
            background: #FFD700;
            color: #000;
            transform: scale(1.1);
        }

        .wishlist-trigger.active {
            color: #FF2D55;
            background: #fff;
        }

        .wishlist-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 10005;
            flex-direction: column;
            padding: 4rem 2rem;
            overflow-y: auto;
        }

        .wishlist-modal.visible {
            display: flex;
        }

        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            width: 100%;
            margin: 2rem auto;
        }

        .wish-item {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .wish-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Feature 1: Texture Microscope */
        .gallery-item {
            position: relative;
            cursor: crosshair;
        }

        .microscope-lens {
            position: absolute;
            border: 2px solid var(--accent-gold-bright);
            border-radius: 50%;
            width: 160px;
            height: 160px;
            pointer-events: none;
            display: none;
            z-index: 100;
            box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.4), 0 20px 40px rgba(0, 0, 0, 0.6);
            background-repeat: no-repeat;
            background-color: #000;
        }
    </style>
    <!-- Phase 2 Logic (Rescue) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // F49: Loader (Fix Loop)
            const l = document.getElementById('loader');
            if (l) setTimeout(() => l.classList.add('hidden'), 1500);

        });

        function attachMicroscope(container, url) {
            const lens = document.createElement('div');
            lens.className = 'microscope-lens';
            lens.style.backgroundImage = `url('${url}')`;
            container.appendChild(lens);

            container.addEventListener('mousemove', (e) => {
                const img = container.querySelector('img');
                const rect = img.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                if (x < 0 || x > rect.width || y < 0 || y > rect.height) {
                    lens.style.display = 'none';
                    return;
                }

                lens.style.display = 'block';
                lens.style.left = (x - lens.offsetWidth / 2) + 'px';
                lens.style.top = (y - lens.offsetHeight / 2) + 'px';

                // Magnification zoom (2.5x)
                const zoom = 2.5;
                const px = (x / rect.width) * 100;
                const py = (y / rect.height) * 100;
                lens.style.backgroundSize = (rect.width * zoom) + 'px ' + (rect.height * zoom) + 'px';
                lens.style.backgroundPosition = `${px}% ${py}%`;
            });

            container.addEventListener('mouseleave', () => {
                lens.style.display = 'none';
            });
        }

        function toggleSchematic() {
            const schematic = document.getElementById('schematic-layer');
            const panelB = document.getElementById('panel-b');
            const isExploded = panelB.style.transform !== 'translate(80px, -40px)';

            if (schematic.style.opacity === '1') {
                schematic.style.opacity = '0';
                panelB.style.transform = 'translate(80px, -40px)';
            } else {
                schematic.style.opacity = '1';
                panelB.style.transform = 'translate(0, 0)'; // Snap shut
                if (navigator.vibrate) navigator.vibrate([20, 10, 20]);
            }
        }

        function generateManifest() {
            if (wishlist.length === 0) {
                alert("Please add projects to your shortlist first.");
                return;
            }
            // Create temporary print window for technical output
            const printWin = window.open('', '', 'width=900,height=1200');
            const date = new Date().toLocaleDateString();

            let itemsHtml = wishlist.map(item => `
                <div style="border-bottom: 2px solid #333; padding: 2rem 0; page-break-inside: avoid;">
                    <div style="display: flex; gap: 2rem;">
                        <img src="${item.url}" style="width: 250px; height: 180px; object-fit: cover; border: 1px solid #000;">
                        <div style="flex: 1;">
                            <h3 style="margin: 0; text-transform: uppercase;">${item.alt.split('-')[0]}</h3>
                            <p style="font-size: 0.7rem; color: #666; margin: 0.5rem 0;">SPEC ID: CARA-REF-${Math.random().toString(36).substr(2, 6).toUpperCase()}</p>
                            <table style="width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: 0.8rem;">
                                <tr><td style="padding: 4px 0; border-bottom: 1px solid #eee;"><strong>Structure:</strong></td><td style="padding: 4px 0; border-bottom: 1px solid #eee;">18mm Sovereign Multi-Core V3</td></tr>
                                <tr><td style="padding: 4px 0; border-bottom: 1px solid #eee;"><strong>Tolerance:</strong></td><td style="padding: 4px 0; border-bottom: 1px solid #eee;">±0.1mm CNC Verified</td></tr>
                                <tr><td style="padding: 4px 0; border-bottom: 1px solid #eee;"><strong>Hardware:</strong></td><td style="padding: 4px 0; border-bottom: 1px solid #eee;">Blum Onyx Edition / Soft-Close</td></tr>
                            </table>
                        </div>
                    </div>
                </div>
            `).join('');

            printWin.document.write(`
                <html>
                <head>
                    <title>Technical Manifest - Caramella Trading Co.</title>
                    <style>
                        body { font-family: 'Courier New', monospace; padding: 4rem; color: #000; line-height: 1.5; }
                        h1 { letter-spacing: 0.3em; margin-bottom: 0.5rem; border-bottom: 5px solid #000; padding-bottom: 1rem; }
                        .header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 3rem; }
                        .footer { margin-top: 4rem; font-size: 0.6rem; border-top: 1px solid #ccc; padding-top: 1rem; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <div>
                            <h1>CARAMELLA</h1>
                            <p style="font-size: 0.8rem;">TECHNICAL SPECIFICATION MANIFEST<br>PRECISION JOINERY & MILLWORK</p>
                        </div>
                        <p style="font-size: 0.7rem; text-align: right;">DATE: ${date}<br>REF: SOV-MANIFEST-${Date.now()}</p>
                    </div>
                    
                    <div style="background: #f0f0f0; padding: 1rem; margin-bottom: 2rem; border-left: 5px solid #000;">
                        <strong>PROJECT SELECTION DATA</strong>
                        <p style="font-size: 0.7rem; margin: 0.5rem 0;">This document serves as an official BIM/CAD reference sheet for architectural procurement.</p>
                    </div>

                    ${itemsHtml}

                    <div class="footer">
                        &copy; 2026 CARAMELLA TRADING COMPANY. CONFIDENTIAL ENGINEERING DATA. ALL JOINTS MEASURE ±0.1mm.
                    </div>
                </body>
                </html>
            `);
            printWin.document.close();
            setTimeout(() => {
                printWin.print();
            }, 500);
        }
    </script>

    <!-- Feature 15: Global Performance Index -->
    <footer style="background: #000; border-top: 1px solid rgba(255,255,255,0.05); padding: 4rem 0;">
        <div class="container"
            style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 2rem;">
            <div style="opacity: 0.4; font-size: 0.7rem; letter-spacing: 0.2em;">
                &copy; 2026 CARAMELLA TRADING CO. | SOVEREIGN ENGINEERING
            </div>
            <div id="performance-badge"
                style="display: flex; align-items: center; gap: 1rem; border: 1px solid #111; padding: 0.5rem 1rem; border-radius: 4px; background: #050505;">
                <div
                    style="width: 10px; height: 10px; border-radius: 50%; background: #00ff00; box-shadow: 0 0 10px #00ff00;">
                </div>
                <div style="font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.1em; color: #fff;">
                    CORE WEB VITALS: <span style="color: #00ff00;">A-TIER</span> | 98MS LCP
                </div>
            </div>
        </div>
    </footer>
</body>



</html>